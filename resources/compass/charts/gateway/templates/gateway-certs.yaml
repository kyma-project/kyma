{{- if and (.Values.gateway.enabled) (eq .Values.gateway.manageCerts true) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.global.istio.gateway.name }}-certs
  namespace: istio-system
type: Opaque
data:
  {{- if not .Values.global.environment.gardener -}}
  "key": {{ .Values.global.ingress.tlsKey }}
  "cert": {{ .Values.global.ingress.tlsCrt }}
  {{- end -}}
  "cacert": "" # This value is populated by Connectivity Certs Setup Job TODO job needs to be updated?
{{- end -}}