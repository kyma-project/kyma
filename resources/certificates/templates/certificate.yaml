{{- if not (lookup "v1" "Secret" "{{ .Values.certificates.kyma.namespace }}" "{{ .Values.certificates.kyma.name }}") }}
{{- if (lookup "v1" "ConfigMap" "kube-system" "shoot-info") }}
---
apiVersion: cert.gardener.cloud/v1alpha1
kind: Certificate
metadata:
  name: kyma-tls-cert
  namespace: {{ .Values.certificates.kyma.namespace }}
spec:
  commonName: "*.{{ .Values.global.domainName }}"
  secretName: {{ .Values.certificates.kyma.name }}
{{- else }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.certificates.kyma.name }}
  namespace: {{ .Values.certificates.kyma.namespace }}
type: Opaque
data:
  tls.crt: {{ .Values.global.tlsCrt }}
  tls.key: {{ .Values.global.tlsKey }}
{{- end }}
{{- end }}