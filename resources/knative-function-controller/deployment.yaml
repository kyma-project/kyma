#apiVersion: apps/v1
#kind: Deployment
#metadata:
#  name: {{ template "fullname" . }}
#  labels:
#    app: {{ template "name" . }}
#    chart: {{ template "chart" . }}
#    release: {{ .Release.Name }}
#    heritage: {{ .Release.Service }}
#spec:
#  replicas: {{ .Values.replicaCount }}
#  strategy:
#    type: RollingUpdate
#    rollingUpdate:
#      maxUnavailable: 0
#  selector:
#    matchLabels:
#      app.kubernetes.io/name: {{ template "name" . }}
#      app.kubernetes.io/instance: {{ .Release.Name }}
#  template:
#    metadata:
#      labels:
#        app.kubernetes.io/name: {{ template "name" . }}
#        app.kubernetes.io/instance: {{ .Release.Name }}
#      annotations:
#        sidecar.istio.io/inject: "false"
#    spec:
#      containers:
#        - name: {{ .Chart.Name }}
#          image: "{{ .Values.global.containerRegistry.path }}/{{ .Values.global.knative_function_controller.dir }}knative-function-controller:{{ .Values.global.knative_function_controller.version }}"
#          imagePullPolicy: {{ .Values.image.pullPolicy }}
#          ports:
#            - containerPort: {{ .Values.service.internalPort }}
#          livenessProbe:
#            httpGet:
#              path: /
#              port: http
#          readinessProbe:
#            httpGet:
#              path: /
#              port: http
#          resources:
#{{ toYaml .Values.resources | indent 12 }}
#    {{- with .Values.nodeSelector }}
#      nodeSelector:
#{{ toYaml . | indent 8 }}
#    {{- end }}
#    {{- with .Values.affinity }}
#      affinity:
#{{ toYaml . | indent 8 }}
#    {{- end }}
#    {{- with .Values.tolerations }}
#      tolerations:
#{{ toYaml . | indent 8 }}
#    {{- end }}
