apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: subscriptions.eventing.kyma.cx
spec:
  group: eventing.kyma.cx
  version: v1alpha1
  scope: Namespaced
  names:
    plural: subscriptions
    singular: subscription
    kind: Subscription
    shortNames:
    - sub
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            endpoint:
              type: string
              pattern: '^(https?)://.+$'
              maxLength: 512
            include_subscription_name_header:
              type: boolean
            include_topic_header:
              type: boolean
            max_inflight:
              type: integer
              minimum: 1
              maximum: 400
            push_request_timeout_ms:
              type: integer
              minimum: 0 # 0 means apply default value, which is 1000ms
              maximum: 5000
            event_type:
              type: string
              minLength: 1
              pattern: '^[a-zA-Z]+([_\-\.]?[a-zA-Z0-9]+)*$'
            event_type_version:
              type: string
              minLength: 1
              pattern: '^[a-zA-Z0-9]+$'
            source:
              source_environment:
                type: string
                minLength: 1
                pattern: '^[a-zA-Z]+([_\-\.]?[a-zA-Z0-9]+)*$'
              source_namespace:
                type: string
                minLength: 1
                pattern: '^[a-zA-Z]+([_\-\.]?[a-zA-Z0-9]+)*$'
              source_type:
                type: string
                minLength: 1
                pattern: '^[a-zA-Z]+([_\-\.]?[a-zA-Z0-9]+)*$'
