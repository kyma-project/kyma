# Migrate from 1.22 to 1.23

## Increase the Loki volume size
In Kyma 1.23.0, the size of the persistent volume claim has been increased from 10Gi to 30Gi

## Upgrade process
### Custom Loki volume size

If the persistence volume claim size is different from out of box setting (which is 10Gi): If the size is > 30 Gi please use kyma upgarade command by passing the overrides for the desired persistent volume claim size as shown [here](https://
kyma-project.io/docs/cli/#details-kyma-cli-command-usage-examples-upgrade-kyma)

Below is an example for override file:
```yaml
apiVersion: v1
data:
  loki.persistence.size: "30Gi"
kind: ConfigMap
metadata:
  labels:
    component: logging
    installer: overrides
  name: logging-overrides
  namespace: kyma-installer
```

### Out of box Loki volume size

However if the persistence volume claim is out of box setting use following command to expand the volume:

```
kubectl delete statefulsets.apps -n kyma-system logging-loki

kubectl patch persistentvolumeclaims -n kyma-system storage-logging-loki-0 --patch '{"spec": {"resources": {"requests": {"storage": "30Gi"}}}}'
```
> Volume exapansions are only possible if field `allowVolumeExpansion` is set to true. Please look [here](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#expanding-persistent-volumes-claims) for more info.

If the above process fails then the persistent volume claim template needs to be deleted. Use following command:

```
kubectl delete statefulsets.apps -n kyma-system logging-loki

kubectl delete persistentvolumeclaims -n kyma-system storage-logging-loki-0
```
> This action will delete the existing data.